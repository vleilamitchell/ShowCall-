### Feature: Link Employee to Department and make department editable via dropdown in Employee view

Brief
- Add ability to associate an employee to a department and change it from the Employee detail view. In the employee view, change the department field to a dropdown which can select a department and link the employee to that department.

Data and API
- Database already models linkage: `server/src/schema/employees.ts` has `departmentId` field; drizzle DDL in `server/drizzle/0003_employees.sql` enforces FK to `departments`.
- Existing endpoints:
  - List employees by department: `GET /api/v1/departments/:departmentId/employees` in `server/src/routes/employees.ts` → `employeesController.listByDepartment` → `employeesService.listByDepartment` → `employeesRepo.listEmployeesByDepartment`.
  - Create employee in department: `POST /api/v1/departments/:departmentId/employees`.
  - Patch employee: `PATCH /api/v1/employees/:employeeId` handled by `employeesController.patch` → `employeesService.patch` → `employeesRepo.updateEmployeeById`.
- Change needed: allow updating `departmentId` via PATCH safely, and enforce constraints:
  - Accept `departmentId` in `employeesService.patch` and forward to repo.
  - In service, if `departmentId` is provided, trim/validate it and optionally verify department exists (via `departments` repo), or rely on FK for integrity and return 400 if violated.
  - Consider cascading impacts: `employee_positions` links are scoped by department; when moving an employee to a different department, any `employee_positions` rows for the old department become invalid. Policy: upon department change, automatically delete that employee’s `employee_positions` rows not matching the new `departmentId`.
  - Assignments: `assignments.assignee_employee_id` references employees but is scoped by `department_id` too. Moving departments should not silently cross-link. Policy: do nothing to past assignments; for future features we may block if there are active assignments in another department. For now, proceed without special handling.

UI
- File: `ui/src/pages/Employees.tsx`.
  - Left pane already filters by department and supports creating under a selected department.
  - Right detail pane currently shows read-only Department field at lines ~241-244:
    - Replace read-only `Input` with a `<select>` populated from `departments` state, showing the current `selected.departmentId`.
    - On change, call `updateEmployee(selected.id, { departmentId: newId })`, then update local state via `mutateItems` to reflect the new department.
    - If the current list is filtered to a specific department and the employee moves to another department, remove it from the current list.

Backend Changes (server)
- `server/src/services/employeesService.ts`:
  - In `patch(id, body)`, support `departmentId`:
    - If present, normalize string; optionally validate existence via a new `departmentsRepo.getDepartmentById` call.
    - After successful update, if `departmentId` changed, delete mismatched `employee_positions` rows via `employeePositionsRepo.deleteEmployeePositionByComposite` in a loop or a new helper that deletes all for the employee where `department_id != newId`.
- `server/src/repositories/employeesRepo.ts`:
  - No schema change required; `updateEmployeeById` already generic.
- Optional new repo helper in `server/src/repositories/employeePositionsRepo.ts`:
  - `deleteAllForEmployeeNotInDepartment(db, employeeId, departmentId)` to clean up cross-department mappings.

API Client (ui)
- `ui/src/lib/serverComm.ts` already has `updateEmployee(employeeId, patch)`; ensure `EmployeeRecord` type includes `departmentId` (it does), so no change needed.

Tests (write first)
- Server integration tests in `server/src/test/integration`:
  1) `employees_department_change.int.ts` (new):
     - Create Dept A and Dept B.
     - Create Employee in Dept A.
     - Create Position in Dept A; map employee to it (employee_positions).
     - PATCH employee `departmentId` to Dept B.
     - Expect 200, employee now has `departmentId` = Dept B.
     - List employee-positions for Dept A; expect no rows for the moved employee (cleanup done).
     - Optionally, list employees in Dept A/B endpoints to reflect movement.

UI tests (manual/behavioral)
- In Employees page:
  - With Department filter = Dept A, select employee in detail pane, change Department dropdown to Dept B.
  - Expect employee to disappear from list if filter is strict to Dept A; appear under Dept B when filter switched.

Implementation Steps
1) Backend service update:
   - Add handling of `departmentId` in `employeesService.patch` and cleanup of `employee_positions`.
   - Add repo helper for bulk delete by employeeId where `department_id != newDept`.
   - Add integration test file and ensure green.
2) UI change in `ui/src/pages/Employees.tsx`:
   - Replace read-only Department `Input` with `<select>` bound to `selected.departmentId` with options from `departments`.
   - On change, call `updateEmployee` then update `items` via `mutateItems`. If current department filter is not '-', and new dept differs, remove from current list.
3) Verify flows:
   - Cross-check `listEmployees` calls elsewhere (position management) still behave.

Notes/Edge Cases
- Authorization remains unchanged; existing auth middleware secures routes.
- If invalid `departmentId` provided, return 400 with clear error; otherwise FK will error—translate DB error if needed.
- No DB migration required.
