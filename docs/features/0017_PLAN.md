### Feature: Inventory Page (List + Detail) using Departments layout as template

Brief description
- Build an Inventory page that mirrors the list-detail pattern used in `Departments`, with a left-side selector and right-side details. The left side includes a department picker at the top, then a search field, followed by a reusable list displaying items filtered by the selected department. Add a "+ New" button under the search field that opens a bottom roll-up sheet over the list to add inventory items.

Relevant code references
- UI routing and pages
  - `ui/src/App.tsx`: Add routes for `/inventory` and `/inventory/:itemId` similar to departments routing.
  - `ui/src/pages/Departments.tsx`: Template reference for list-detail implementation.
  - `ui/src/features/listDetail/components/ListDetailLayout.tsx`: Shared list-detail layout container.
  - `ui/src/features/listDetail/hooks/useListDetail.ts`: Hook managing list, selection, query, and navigation.
  - `ui/src/components/DepartmentSelect.tsx`: Reusable department picker that syncs `departmentId` via URL query params.
  - `ui/src/components/ui/sheet.tsx`: Sheet component (use `side="bottom"`) for the "+ New" roll-up add-item flow.
- Server and client API for inventory
  - `server/src/api.ts`: Inventory routes under `/api/v1/inventory` for items, transactions, reservations, locations, and item summary.
  - `server/src/services/inventory/items.ts`: `listInventoryItems`, `createInventoryItem`, `getInventoryItem`, `patchInventoryItem`.
  - `ui/src/lib/serverComm.ts`: Inventory client helpers `listInventoryItems`, `createInventoryItem`, `getInventoryItem`, `patchInventoryItem`, plus transactions/reservations if needed later.

Data model and types
- Use `InventoryItemRecord` from `ui/src/lib/serverComm.ts` with `itemId` as the identifier.
- For list-detail generics, adapt `InventoryItemRecord` into the `ListItem` shape expected by `useListDetail` by mapping `itemId` to `id` within the adapter layer.

UI requirements and structure
- Create a new page `ui/src/pages/Inventory.tsx` modeled after `Departments.tsx`:
  - Left side (`ListDetailLayout.left`):
    - Department picker: render `<DepartmentSelect className="px-3 py-2" />`; it manages `departmentId` in URL query params.
    - Search bar: use `FilterBar` from list-detail with `q` bound to `queryState.q`.
    - "+ New" button under the search field: clicking opens a bottom roll-up `<Sheet side="bottom">` over the list to add an inventory item.
    - Reusable list: use `List<InventoryListItem>` to render items. Each list item shows `name` (primary) and `itemType` or `sku` (secondary). Wire `selectedId`, `onSelect`, and `loading` from `useListDetail`.
  - Right side (`ListDetailLayout.right`):
    - If no selection, show helper text. If selected, show details: name (editable inline), base unit (editable), item type, attributes JSON editor read-only for v1, and active toggle.
- New item roll-up sheet
  - Triggered by the "+ New" button.
  - Opens as a bottom roll-up (Sheet) over the list.
  - Contains an "Add Inventory Item" form with inputs: SKU, Name, Item Type (text/select), Base Unit, Schema ID, Attributes (JSON textarea), optional Category ID, Active checkbox (default true).
  - Submit calls `createInventoryItem` and then selects the created item via `useListDetail.create` flow.

Client adapter and filtering logic
- Implement an adapter in `Inventory.tsx` matching `ResourceAdapter` to bridge `InventoryItemRecord` to `ListItem`:
  - `list(query, filters)`: call `api.listInventoryItems({ q: query?.q, itemType: filters?.itemType, active: filters?.active })` and map each `{ itemId, ... }` to `{ id: itemId, ... }` for the hook/UI, preserving other fields.
  - `get(id)`: call `api.getInventoryItem(String(id))` and map `{ itemId, ... }` to `{ id: itemId, ... }`.
  - `create(partial)`: call `api.createInventoryItem` with required fields derived from form state; return mapped result.
  - `update(id, patch)`: call `api.patchInventoryItem(String(id), patchMapped)` and map result.
  - `searchableFields`: include `['name', 'sku', 'itemType']`.
- The department filter is URL-driven via `DepartmentSelect`, but inventory item APIs do not currently support department scoping on list. For v1, department picker will be informational/contextual; leave the param unused in the server call. Future improvement could add `departmentId` to the items table or a join table and extend `listInventoryItems` to filter by department.

Routing
- In `ui/src/App.tsx`, import the new `Inventory` page and add routes similar to departments:
  - `<Route path="/inventory" element={<Inventory />} />`
  - `<Route path="/inventory/:itemId" element={<Inventory />} />`
- Update `ui/src/components/appSidebar.tsx` to include an Inventory nav entry, following the existing pattern with `isActive('/inventory')`.

Edge cases and behaviors
- When the list is empty, `useListDetail` will clear selection and navigate to `/inventory`.
- Keep selection in URL using the hook’s route sync logic with param name `itemId` derived from `resourceKey='inventory'`.
- JSON attributes input: validate as JSON client-side; send parsed object to `createInventoryItem`. For updates, leverage `patchInventoryItem` with validation occurring server-side.

Phases
- Phase 1: UI page and routing
  - Create `ui/src/pages/Inventory.tsx` with list-detail layout, department picker, search, list, detail panel (read-only fields except name/baseUnit/active toggles via update), and a "+ New" roll-up form to add new items.
  - Wire adapter to client API, mapping `itemId` to `id`.
  - Add routes in `ui/src/App.tsx` and sidebar link in `ui/src/components/appSidebar.tsx`.
- Phase 2 (optional enhancements)
  - Add filter controls for `itemType` and `active` above the list (using a simple select and toggle) and pass as `filters` to the adapter.
  - Implement richer attribute schema selection UI (fetch schema options) and a better JSON editor.
  - Extend server `listInventoryItems` to accept `departmentId` when supported by schema.

Notes from the request (verbatim alignment)
- "Use the departments layout as a template" → mirror `Departments.tsx` structure and `ListDetailLayout`.
- "There will be a list selector side and a detail side" → use split layout.
- "Top of the list selector will be a department picker. Then a search field" → place `DepartmentSelect` then `FilterBar`.
- "Under that we will have the list selector using the reusable component which will display the items for that department" → use `List` with items; for v1, department context is UI-only until server filter exists.
- Updated requirement: "add a '+ New' button under the search field" → place a small "+ New" button below the search, opening a bottom roll-up `<Sheet>` over the list to add inventory items.
